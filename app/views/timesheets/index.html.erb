<% provide(:title, "Timesheets") %>

<h2>
  Timesheets -
  <%= job.title %> -
  <%= job.employee_profile.user.full_name %>
</h2>

<% if pay_period %>
  <div class="panel panel-info">
    <div class="panel-heading">
      <h4 class="panel-title">Notes</h4>
    </div>
    <div class="panel-content">
      <h4><%= pay_period.notes if pay_period.notes %></h4>
      <h5 id="edit-notes-toggler">
        Edit Notes
        <span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true">
        </span>
      </h5>
      <div id="pay-period-notes-form-wrapper">
        <%= render "pay_periods/pay_period_notes_form" %>
      </div>
    </div>
  </div>
<% end %>

<div class="outer_wrapper">
  <div class="btn-group">
    <%= link_to "New Timesheet",
      new_timesheet_path(job_id: params[:job_id]),
      class: "btn btn-success", id: "new_timesheet_button", method: :get %>
  </div>
    <div class="css_table">
      <div class="css_tbody">
        <% if pay_periods %>
          <% pay_periods.each do |pay_period| %>
            <%= link_to ("#{pay_period.start_date.strftime("%m/%d/%Y")} - " +
              pay_period.end_date.strftime("%m/%d/%Y")),
            timesheets_path(
              job_id: params[:job_id], pay_period_id: pay_period.id),
            class: "btn btn-default btn-primary" %>
          <% end %>
        <% else %>
          <%= render "timesheets_table" %>
        <% end %>
      </div>
    </div>
</div>
